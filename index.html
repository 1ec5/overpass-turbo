<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" lang="en"></meta>
  <meta name="viewport" content="width=device-width;" />
  <title>overpass turbo</title>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  <!--jQuery-->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <!--CodeMirror-->
  <link rel="stylesheet" href="libs/CodeMirror/lib/codemirror.css" />
  <script src="libs/CodeMirror/lib/codemirror.js"></script>
  <script src="libs/CodeMirror/mode/javascript/javascript.js"></script>
  <script src="libs/CodeMirror/mode/xml/xml.js"></script>
  <script src="libs/CodeMirror/mode/clike/clike.js"></script>
  <script src="libs/CodeMirror/lib/util/multiplex.js"></script>
  <script src="libs/CodeMirror/lib/util/closetag_mustache.js"></script>
  <!--leaflet-->
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4.5/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet-0.4.5/leaflet.js"></script>
  <script src="libs/locationfilter/src/locationfilter.js"></script>
  <link rel="stylesheet" href="libs/locationfilter/src/locationfilter.css"/>
  <!--misc libraries-->
  <script src="libs/misc.min.js"></script>
  <!--jQuery UI-->
  <link type="text/css" href="jquery-ui.css" rel="Stylesheet" />
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
  <!--own scripts & styles-->
  <link rel="stylesheet" type="text/css" href="default.css" />
  <link rel="stylesheet" type="text/css" media="(max-width: 700px), (max-device-width: 799px)" href="compact.css"/>
  <script src="settings.js"></script>
  <script src="ide.js"></script>
  <script src="overpass.js"></script>
</head>
<body class="loading">
  <!--more optional libraries-->
  <script lazy-src="libs/html2canvas/html2canvas.patched.min.js"></script>
  <script lazy-src="libs/html2canvas/jquery.plugin.html2canvas.js"></script>
  <script lazy-src="libs/canvg/rgbcolor.js"></script>
  <script lazy-src="libs/canvg/canvg.min.js"></script>

  <!--layout-->
  <div id="navs">
    <div class="nav">
      <div class="buttons">
        <a class="button group left"      accesskey="1" onclick="ide.onRunClick();">Run</a>
        <a class="button group"           accesskey="2" onclick="ide.onShareClick();">Share</a>
        <a class="button group right gap" accesskey="3" onclick="ide.onExportClick();">Export</a>
        <a class="button group left"      accesskey="4" onclick="ide.onSaveClick();">Save</a>
        <a class="button group right gap" accesskey="5" onclick="ide.onLoadClick();">Load</a>
        <a class="button group left"      accesskey="9" onclick="ide.onSettingsClick();">Settings</a>
        <a class="button group right"     accesskey="0" onclick="ide.onHelpClick();">Help</a>
      </div>
      <div class="title">overpass turbo</div>
      <div class="tabs">
        <a class="button active">Map</a>
        <a class="button">Data</a>
      </div>
    </div>
  </div>

  </div>
  <div id="editor">
    <!--CodeMirror goes here-->
    <textarea></textarea>
  </div>
  <div id="dataviewer">
    <div id="map"></div>
    <div id="data"></div>
  </div>

  <!--wait spinner-->
  <div class="modal"><div class="wait-info"><h4>overpass turbo loading...</h4><ul></ul></div></div>

  <!--some dialogs-->
  <!--help-->
  <div id="help-dialog" title="Help" class="dialog">
    <h3><a>Introduction</a></h3>
    <div>
      <p>This web application lets you run <a href="http://overpass-api.de">Overpass API</a> <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide">queries</a> and analyse the results interactively on a map.</p>
      <p>You can run xml styled or OverpassQL queries. Returned xml or json data is parsed and (if possible) shown on the map.</p>
      <p>One can use the following handy shortcuts in the query: <ul>
        <li><i>{{bbox}}</i> - the bounding box coordinates of the current map view.</li>
        <li><i>{{center}}</i> - the center coordinates of the current view.</li>
        <li>Arbitrary shortcuts can be defined easily: just put <i>{{shortcut=value}}</i> somewhere in the script.</li>
      </ul></p>
    </div>
    <h3><a>IDE</a></h3>
    <div>
      <h4>Sharing</h4>
      <p>It is possible to send the query you are currently working on to someone else. This is found in the <i>Share</i> tool and shows you a link which you can send to a friend or post online. (Note that others will work on their own copy of the query.)</p>
      <h4>Save and Load</h4>
      <p>You can also save and load your queries. For a start, there are a few example queries preloaded. Take a look at them for a short glimpse of what overpass can do.</p>
      <h4>Keyboard shortcuts:</h4>
      <p><i>Ctrl+Enter</i>: Run the current query.</p>
    </div>
    <h3><a>Export</a></h3>
    <div>
      <p>The <i>Export</i> tool holds a variety of options to do with the query and/or data loaded by the query.<br />
      Options with this symbol:<span class="ui-icon ui-icon-extlink" style="display:inline-block;"></span> rely on or refer to external (online) tools.</p>
      <h4>Map</h4>
      <p>This lets you convert the current map-with-data view to a static png image, or a (fullscreen) interactive map, etc.</p>
      <h4>Query</h4>
      <p>This holds some things you can do with the raw query, like converting it between the various query languages. A very usefull option is the possibility to send the query to JOSM.</p>
    </div>
    <h3><a>License & Attribution</a></h3>
    <div>
      <h4>Data Sources</h4>
      <ul class="plain">
        <li>Data &copy; <a href="http://openstreetmap.org/">OpenStreetMap</a> contributors, <span style="font-size:smaller;"><a href="http://opendatacommons.org/licenses/odbl/1-0/">ODbL</a> (<a href="http://www.openstreetmap.org/copyright">Terms</a>)</span></li>
        <li>Data mining by <a href="http://overpass-api.de/">Overpass API</a></li>
        <li>Map tiles &copy; <a href="http://openstreetmap.org/">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/" style="font-size:smaller;">CC-BY-SA</a></li>
        <li>Search provided by <a href="http://wiki.openstreetmap.org/wiki/Nominatim">Nominatim</a></li>
      </ul>
      <h4>Source Code</h4>
      <p>The <a href="https://github.com/tyrasd/overpass-ide">source code</a> of this application is released under a MIT-style <a href="LICENSE">license</a>.</p>
      <h4>Software & Libraries</h4>
      <ul class="plain">
        <li>Map powered by <a href="http://leaflet.cloudmade.com">Leaflet</a></li>
        <li>Editor powered by <a href="http://codemirror.net/">CodeMirror</a></li>
        <li>Driven by <a href="http://jquery.com/">jQuery</a></li>
        <li>Other libraries: <a href="http://jqueryui.com/">jQuery UI</a>, <a href="http://html2canvas.hertzen.com/">html2canvas</a>, <a href="http://code.google.com/p/canvg/">canvg</a>, <a href="https://github.com/tripbirds/leaflet-locationfilter">leaflet-locationfilter</a></li>
      </ul>
    </div>
  </div>
  <!--settings-->
  <div title="Settings" id="settings-dialog" class="dialog">
    <h3><a>General Settings</a></h3>
    <div>
      <p><label>Server:</label> <input type="text" name="server" value="" style="width:270px;"/></p>
      <p><input type="checkbox" name="force_simple_cors_request"/>&nbsp;Force simple CORS requests <small>(use when the server doesn't support preflighted <a href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS</a> requests)</small></p>
      <p><input type="checkbox" name="use_html5_coords"/>&nbsp;Start at current location <small>(html5 geolocation)</small></p>
      <p><input type="checkbox" name="use_rich_editor"/>&nbsp;Enable rich code editor <small>(disable this on mobile devices; requires a page-reload to take effect)</small>.</p>
    </div>
    <h3><a>Map</a></h3>
    <div>
      <p><label>Tile-Server:</label> <input type="text" name="tile_server" value="" style="width:240px;"/></p>
      <p><label>Tiles Opacity:</label> <input type="text" name="background_opacity" value="" style="width:30px;"/> <small>(transparency of background tiles: 0=tansparent &hellip; 1=visible)</small></p>
      <p><input type="checkbox" name="enable_crosshairs"/>&nbsp;Show crosshairs at the map center.</p>
    </div>
    <h3><a>Sharing</a></h3>
    <div>
      <p><input type="checkbox" name="share_include_pos"/>&nbsp;Include current map state in shared links</p>
      <p><label>Compression <small>(share)</small>:</label> <input type="text" name="share_compression" value="" style="width:40px;"/></p>
    </div>
    <h3><a>Export</a></h3>
    <div>
      <p><input type="checkbox" name="export_image_scale"/>&nbsp;Show scale on exported images.</p>
      <p><input type="checkbox" name="export_image_attribution"/>&nbsp;Show attribution on exported images.</p>
    </div>
  </div>
  <!--save-->
  <div title="Save" id="save-dialog" class="dialog">
    <p>Enter a name for this query</p>
    <p><input name="save" type="text" /></p>
  </div>
  <!--load-->
  <div title="Load" id="load-dialog" class="dialog">
    <p>Select example to load:</p>
    <ul class="plain"></ul>
  </div>
  <!--export-->
  <div title="Export" id="export-dialog" class="dialog">
    <h3>Map</h3>
    <p>as <a id="export-image" href="" onclick="ide.onExportImageClick(); $(this).parents('.ui-dialog-content').dialog('close'); return false;">png image</a></p>
    <p>as <a id="export-interactive-map" href="">interactive Map</a></p>
    <p>as <a id="export-overpass-openlayers" href="">OpenLayers Map<span class="ui-icon ui-icon-extlink" style="display:inline-block;"></span></a> <small>(only for queries returning valid OSM-XML)</small></p>
    <p>get current <a id="export-map-state" href="">map state</a> <small>bbox, center, etc.</small></p>
    <h3>Data</h3>
    <p>raw link to <a id="export-overpass-api" href="">API interpreter<span class="ui-icon ui-icon-extlink" style="display:inline-block;"></span></a></p>
    <p>as <a id="export-geoJSON" href="">geoJSON</a></p>
    <h3>Query</h3>
    <p>as <a id="export-text" href="" download='query.txt'>text</a></p>
    <p>convert to <a id="export-convert-xml" href="">xml<span class="ui-icon ui-icon-extlink" style="display:inline-block;"></span></a></p>
    <p>convert to (<a id="export-convert-compact" href="">compact<span class="ui-icon ui-icon-extlink" style="display:inline-block;"></span></a>) <a id="export-convert-ql" href="">OverpassQL<span class="ui-icon ui-icon-extlink" style="display:inline-block;"></span></a></p>
    <p>load into <a id="export-josm" href="">JOSM</a> <small>(only for queries returning valid OSM-XML with meta data)</small></p>
  </div>
  <div title="Export-geoJSON" id="export-geojson" class="dialog">
    <p>The currently shown data in geoJSON format:</p>
    <textarea style="width:100%" rows="16" readonly></textarea>
  </div>
  <!--share-->
  <div title="Share" id="share-dialog" class="dialog">
    <h3>Share-Link</h3>
    <p>Copy this <a href="" id="share_link_a">link</a> to share the current code:</p>
    <p><textarea rows=4 style="width:100%" readonly id="share_link_textarea"></textarea></p>
    <span id="share_link_warning"></span>
    <h3>Options</h3>
    <p><input type="checkbox" name="include_coords" onchange="ide.updateShareLink();"/>&nbsp;include current map state</p>
    <p><input type="checkbox" name="run_immediately" onchange="ide.updateShareLink();"/>&nbsp;run this query immediately after loading</p>
  </div>

</body>
</html>
